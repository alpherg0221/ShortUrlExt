# Kanper

![kanper-demo](https://user-images.githubusercontent.com/41366495/194407259-08027246-0de6-4101-98c6-4af273220a10.gif)

## Table of Contents
for general
- About
- 導入方法
- 機能一覧

for developers
- リポジトリの構成
- 構成技術
- License

for MWSCup
- 審査基準について

## About
短縮URLを検知し，確認ページで移動先の情報を表示することでユーザを危険なページから保護するブラウザ拡張機能です．

| TODO 背景含めもう少しボリュームを持たせたい

> このツールは`MWSCup 2022 事前課題`として`Undanomi`が作成しました．

## 導入方法
1. このリポジトリのReleaseをクリック
2. 一番上の最新バージョンのrelease.zipをダウンロードして解凍
3. Chrome「設定」→「拡張機能」をクリックし，拡張機能編集ページを開く
4. 右上のディベロッパーモードをオンにし，「パッケージ化されていない拡張機能を読み込む」をクリック
5. 解凍したファイル(frontend)を選択

## 機能一覧
### 遷移確認ページ
短縮URLにアクセスしたとき，最初に表示されるページです．  
以下のものが表示されています．
- 遷移先URL
- ページタイトル
- ページの説明
- ページのサムネイル
  - サムネイルをクリックすることで解像度が上がります
- 安全性チェック
  - 遷移先のページが安全かどうかを外部サイトで確認することができます

遷移確認ページでは，以下の事ができます．
- 遷移先ページに移動
- 遷移先ページをホワイトリストに登録
- 遷移先ページをブラックリストに登録

### ホワイトリスト機能
安全と判明しているページをホワイトリストに登録することで，遷移確認ページ
を省略することができます．拡張機能ポップアップからホワイトリストを編集できます．

短縮URLの遷移先のドメインがホワイトリストに登録されていれば，確認ページを表示せずに短縮URLのページにアクセスします．

### ブラックリスト機能
危険と判明しているページをブラックリストに登録することで，そのページにアクセスできないようにします．拡張機能ポップアップからブラックリストを編集できます．

短縮URLの遷移先のドメインがブラックリストに登録されていれば，確認ページにてダイアログを表示後，タブを閉じます．

### サーバを変更機能
自サーバのドメイ名を登録することで，ブラウザ，サーバ，ワーカーをすべて一端末で動作可能となります．

### 拡張機能ポップアップ
右上の拡張機能アイコンをクリックするとポップアップが表示されます．ここでは各種設定を行ったり，使い方を見ることができます．
- ホワイトリストを編集
  - ホワイトリスト編集ページを開きます
- ブラックリストを編集
  - ブラックリスト編集ページを開きます
- このページをホワイトリストに追加
  - 現在表示しているページをホワイトリストに追加します
- サーバを変更
  - 遷移先ページの情報取得を行うサーバを変更することができます

---
for developers
## リポジトリの構成
```
/
|--- backend/
|       遷移先ページの情報取得を行うAPI(Golang)
|--- driver/
|       情報取得のためにChromeを動作させるドライバ(Golang)
|--- frontend/
        Chromeの拡張機能(HTML/CSS/JS)
```

## 構成技術

### 全体構成

![](https://user-images.githubusercontent.com/41366495/194413609-cdcba445-769c-437d-8743-5e4fa847c4cd.png)

### backend

- Golang製
  - 初期実装はPythonだった
  - Pythonの速度面，パラダイム面の問題に直面し全ての実装を移行
- Dockerで可搬性を確保
  - セルフホスティングも可能な設計
- 冗長化を前提としたスケール可能な設計
  - ワーカーとなるプログラムはインターネット接続さえあれば動作
- 動作はGCPのインスタンス x 2を使用
  - APIサーバとワーカーインスタンス
- 汚染を前提としたURLへのアクセス構成
  - VM上で簡単にロールバックができるように
- 高速なURL解決
  - 全体では複雑な構造で速度がかなり低下する
  - 並行処理，アクセス最適化による速度向上を実現

### frontend
- HTML/CSS/JSで実装
- Material Designを使用

## 開発ロードマップ

| TODO バックエンドはプライバシー・フロントエンドはどうするか

## Licence

---
for MWSCup
## 審査基準について
